<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="admin/resources.html :: resources">
</head>
<body>

<div th:replace="admin/admin.html :: navbar"></div>

<div class="m-container" id="categoryDiv">
	<div class="control-label">
		<span class="label label-success">分类管理</span>
	</div>
	<br>
	<ol class="breadcrumb">
		<li><a href="#">分类管理</a></li>
		<!--<li><a href="#">Library</a></li>-->
		<!--<li class="active">Data</li>-->
	</ol>
	<div class="categoryTable">
		<table class="table table-bordered">
			<thead class="bg-info">
				<tr>
					<th>ID</th>
					<th>图片</th>
					<th>分类名称</th>
					<th>属性管理</th>
					<th>产品管理</th>
					<th>编辑</th>
					<th>删除</th>
				</tr>
			</thead>
			<tbody>
				<tr v-for="bean in beans">
					<td>{{bean.id}}</td>
					<td><img height="200px" width="900"  :src="'images/category/'+bean.id+'.jpg'"> </td>
					<td>{{bean.name}}</td>
					<td>
						<!--bean.id-->
						<a :href="'admin_property_list?cid=' + bean.id">
							<span class="glyphicon glyphicon-th-list"></span>
						</a>
					</td>
					<td>
						<a :href="'admin_product_list?cid=' + bean.id">
							<span class="glyphicon glyphicon-shopping-cart"></span>
						</a>
					</td>
					<td>
						<a :href="'admin_category_edit?cid=' + bean.id">
							<span class="glyphicon glyphicon-pencil">
						</span>
						</a>
					</td>
					<td>
						<a :href="'admin_category_delete?cid=' + bean.id">
							<span class="glyphicon glyphicon-trash"></span>
						</a>
					</td>
				</tr>
			</tbody>
		</table>
		<div class="paginationDiv" th:fragment="pagination">
			<ul class="pagination">
				<li>
					<a href="#" :class="{disabled: pagination.pageNum==1}" @click="jump('first')">&laquo;</a>
				</li>
				<li>
					<a href="#" :class="{disabled: pagination.pageNum==i}" v-for="i in pagination.navigatepageNums" @click="jump(i)">{{i}}</a>
				</li>
				<li>
					<a href="#" :class="{disabled: pagination.pageNum==pagination.pages}" @click="jump('last')">&raquo;</a>
				</li>
			</ul>
		</div>
	</div>
</div>

<script type="text/javascript">

	$(function () {

		var data4Vue = {

			url: "categories",
			beans: [],
			pagination: {}
		};

		var vue = new Vue({

			el: "#categoryDiv",
			data: data4Vue,
			mounted: function () {
				this.list(0)
			},
			methods: {

				list: function (start) {

					var url = this.url + "?start=" + start;
					axios.get(url).then(function (response) {

						vue.pagination = response.data;
						vue.beans = response.data.list;
					})
				},
                jump: function(page){
                    if('first'== page && 1!=vue.pagination.pageNum)
                        vue.list(1);

                    // else if('pre'== page && vue.pagination.hasPreviousPage )
                    //     vue.list(vue.pagination.prePage);
					//
                    // else if('next'== page && vue.pagination.hasNextPage)
                    //     vue.list(vue.pagination.nextPage);

                    else if('last'== page && vue.pagination.pageNum!=vue.pagination.pages)
                        vue.list(vue.pagination.pages);

                },
                jumpByNumber: function(start){
                    if(start!=vue.pagination.pageNum)
                        vue.list(start);
                }
			}
		})
	})

</script>

</body>
</html>